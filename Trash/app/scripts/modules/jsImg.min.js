"use strict";angular.module("js.Img",[]).value("jsBootstrapBreaks",{suffix:["xs","sm","md","lg"],minWidth:[0,768,992,1200]}).factory("jsResponsiveValue",function(jsBootstrapBreaks){var breaks=jsBootstrapBreaks;return{getValue:function(element,prefix){var src=undefined;prefix?null:prefix="src-";for(var i=breaks.minWidth.length-1;i>=0;i--){var breakSrc=element.attr(prefix+breaks.suffix[i]);if(document.body.clientWidth>breaks.minWidth[i]&&breakSrc){src=breakSrc;break}}return src}}}).factory("$jsDebounce",function($timeout){function debouncer(todo,milli){var promise=null;this.go=function(){promise?$timeout.cancel(promise):null;promise=$timeout(todo,milli)}}return{newDebouncer:function(todo,milli){return new debouncer(todo,milli)}}}).directive("jsRespond",function($window,jsResponsiveValue,$jsDebounce){return{restrict:"A",link:function($scope,element,attrs){var split=element.attr("js-respond").split(":");var op,attr,prefix,debouncer;function setSrc(){var value=jsResponsiveValue.getValue(element,prefix);if(value){element[op](attr,jsResponsiveValue.getValue(element,prefix))}else{element[op](attr,"")}}if(split.length===3){op=split[0];attr=split[1];prefix=split[2]+"-";if(element[op]){debouncer=$jsDebounce.newDebouncer(setSrc,100);element[op](attr,jsResponsiveValue.getValue(element,prefix));angular.element($window).on("resize",function(){debouncer.go()})}}}}}).directive("jsBootstrapBackgroundImg",function($window,jsResponsiveValue,$jsDebounce){return{restrict:"A",link:function($scope,element,attrs){var debouncer=$jsDebounce.newDebouncer(setSrc,100);element.css("background-image","url("+jsResponsiveValue.getValue(element,"bg-src-")+")");function setSrc(){element.css("background-image","url("+jsResponsiveValue.getValue(element,"bg-src-")+")")}angular.element($window).on("resize",function(){debouncer.go()})}}}).directive("jsBootstrapImg",function($window,jsResponsiveValue,$jsDebounce){return{restrict:"E",replace:true,scope:{},compile:function(element,attrs){element.attr("src",jsResponsiveValue.getValue(element));return function($scope,element){var debouncer=$jsDebounce.newDebouncer(setSrc,100);$scope.src=element.attr("src");function setSrc(){$scope.src=jsResponsiveValue.getValue(element);element.attr("src",$scope.src)}angular.element($window).on("resize",function(){debouncer.go()})}},template:"<img ng-show='src'>"}});