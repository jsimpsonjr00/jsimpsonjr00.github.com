(function(a){var f=a(document);f.ready(function(){var g=a("#woot-detail-view"),h=null,e=a("#theme-detail-tmpl"),i=a("#item-detail-tmpl");f.on("newWootData",function(f,b){var c,j;for(j in b)c=a("#"+j+"-item-detail"),c.length===0?(c=e.applyTemplate(b[j]),g.append(c)):c.empty().html(i.applyTemplate(b[j].item))});f.on("activateDetail",function(e,b){var c=a(b);b!==void 0&&(h&&h.removeClass("active"),h=a("#"+c.attr("data-theme")+"-item-detail").addClass("active"),g.addClass("active"))});g.on("click",function(){g.removeClass("active")});
g.on("click","a",function(a){a.stopPropagation()})})})(jQuery);
(function(a){var f=a(document);f.ready(function(){var g=a("#woot-thumb-view"),h=a("#theme-thumb-tmpl"),e=a("#item-thumb-tmpl"),i=0;f.on("newWootData",function(f,b){var c,j;for(j in b)if(c=a("#"+j+"-item-thumb"),c.length===0){for(var d=c=h.applyTemplate(b[j]),m=++i,l=1;l<=6;l++)m!=0&&m%l===0&&d.addClass("_"+l);g.append(c)}else c.empty().html(e.applyTemplate(b[j].item))});g.on("click","[id$=-thumb]",function(){a(this);f.trigger("activateDetail",[this])})})})(jQuery);
(function(a){function f(a){for(var a=a.value.items,d={},c={},e=false,f=0;f<a.length;f++)if(d=a[f],k[d.ThemeName]===void 0||k[d.ThemeName].SaleUrl!==d.SaleUrl||k[d.ThemeName].SoldOutPercentage!==d.SoldOutPercentage)d.PercentAvailable=100-d.SoldOutPercentage*100,d.WootOff==true&&(e=true),d={ThemeName:d.ThemeName,item:d},c[d.ThemeName]=d,k[d.ThemeName]=d;b=e;g();return c}function g(a){var d=3E4;a!==true&&(d=b?6E4:6E5);window.clearTimeout(i);i=window.setTimeout(function(){e.trigger("modelNew",[])},d);
e.trigger("autoRefreshScheduled",[d])}function h(){var b={success:function(a){e.trigger("newWootData",[f(a)])}},b=a.extend(true,c,b);a.ajax(b)}var e=a(document),i=null,k={},b=false,c={type:"GET",dataType:"jsonp",url:"http://pipes.yahoo.com/pipes/pipe.run",jsonp:"_callback",data:{_id:"22de465a94e4410f27763dfbfe4d82e1",_render:"json"},success:function(a){e.trigger("newWootData",[f(a)])},error:function(){g(true)},timeout:1E4};e.on("wootActive",function(){a.ajax(c);e.off("modelNew");e.on("modelNew",h)})})(jQuery);
(function(a){var f=a(document);f.ready(function(){function g(){var a=Math.floor(e/60),b=e%60,c="",c=e>0?a+":"+(b<10?"0"+b:b):"Now";h.html(c);window.clearTimeout(i);i=window.setTimeout(g,5E3);e-=5}var h=a("#woot-status-time"),e=0,i=null;f.on("autoRefreshScheduled",function(a,b){e=b/1E3;g()})})})(jQuery);
