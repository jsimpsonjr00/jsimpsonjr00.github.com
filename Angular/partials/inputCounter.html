<section ng-controller='DemoCtrl'>
	<h3>Demonstration</h3>
	<textarea ng-model='demo.text' js-maxlength='50'></textarea> {{ demo.text.length }} / {{ demo.jsMaxLength }}
</section>
<section>
	<h3>The Code</h3>
	<pre>
angular.module( "jsMaxlength", [] )
	.directive('jsMaxlength', function() {
	return {
		require: 'ngModel',
	    link: function (scope, element, attrs, ngModelCtrl) {
	    	var maxlength = Number( attrs.jsMaxlength );
	    	scope[ attrs.ngModel.split( ".")[0] ].jsMaxLength = maxlength;
    		
	    	function fromUser(text) {
	    		if( text.length > maxlength ) {
	        		var transformedInput = text.substring( 0, maxlength );
	        		ngModelCtrl.$setViewValue( transformedInput );
	        		ngModelCtrl.$render();
	        		
	        		return transformedInput;
	        	} 
	        	return text;
	      	}
	    	ngModelCtrl.$parsers.push( fromUser );
	    }
	}; 
});
	</pre>
</section>
<script>
app.directive('jsMaxlength', function() {
	return {
		require: 'ngModel',
	    link: function (scope, element, attrs, ngModelCtrl) {
	    	var maxlength = Number( attrs.jsMaxlength );
	    	scope[ attrs.ngModel.split( ".")[0] ].jsMaxLength = maxlength;
    		
	    	function fromUser(text) {
	    		if( text.length > maxlength ) {
	        		var transformedInput = text.substring( 0, maxlength );
	        		ngModelCtrl.$setViewValue( transformedInput );
	        		ngModelCtrl.$render();
	        		
	        		return transformedInput;
	        	} 
	        	return text;
	      	}
	    	ngModelCtrl.$parsers.push( fromUser );
	    }
	}; 
});
app.controller( "DemoCtrl", function( $scope ) {
	$scope.demo = {
		text: ""
	};
});
</script>

